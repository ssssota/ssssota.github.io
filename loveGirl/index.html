<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>かわいい女の子が承認欲求を満たしてくれる</title>
    <style>
        html, body {padding: 0; margin: 0; border: 0; font-family:-apple-system, BlinkMacSystemFont, "Helvetica Neue", "Segoe UI", sans-serif;}
        p {margin: 10px;}
        #main {margin: 0 auto;}
        @media screen and (max-width:640px) {
            img {width: 100%;}
        }
    </style>
</head>
<body>
    <div id="main">
        <div id="rightCol">
            <p>女の子:<span id="girlSay"></span></p>
            <p>あなた:<input type="text" id="mySay"><input type="button" value="SAY!" id="say"></p>
            <p><a id="twitterShare" class="twitter-share-button" href="https://twitter.com/share" data-dnt="true" data-text="女の子に褒めてもらっちゃった！" data-url="https://t.co/AdtFYyo7oP" data-hashtags="かわいい女の子が承認欲求を満たしてくれる">Tweet</a></p>
        </div>
        <div id="leftCol">
            <img id="girlImg" src="http://4.bp.blogspot.com/-ZqTJO_C5wuk/WUJL30ZWLCI/AAAAAAABE1Q/pJdy4TV1CUQ-UyTmhHDM49YiKHg4PvGjQCLcBGAs/s800/youchien_blue_seifuku_girl.png" alt="かわいい女の子の図">
            <small><a href="http://www.irasutoya.com/">いらすとや</a>より</small>
        </div>
    </div>
    <script>
        window.twttr=(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);t._e=[];t.ready=function(f){t._e.push(f);};return t;}(document,"script","twitter-wjs"));

        var $twitterShare;
        var $girlImg;
        var $girlSay;
        var $mySay;
        var $say;
        var state;
        var STATE_WHAT = 0, STATE_SAY = 1, STATE_PRAISE = 2;
        var girlTempl = ['今', '明日', '今日', '未来では', '昔は', '昨日', '明後日', '明々後日', 'ここで', '今は'];
        var girlImgUrls = [
            'http://3.bp.blogspot.com/-C-EqAY7AXKg/Vu0j7zLH9nI/AAAAAAAA494/IpW8VXzZ9PgzecW5SjNX6Np1yvfh9D-_Q/s800/hair_mitsuami.png',
            'http://4.bp.blogspot.com/-ZqTJO_C5wuk/WUJL30ZWLCI/AAAAAAABE1Q/pJdy4TV1CUQ-UyTmhHDM49YiKHg4PvGjQCLcBGAs/s800/youchien_blue_seifuku_girl.png',
            'http://2.bp.blogspot.com/-qZ-jYSQV0Yw/VoX5HIbYzGI/AAAAAAAA2SQ/NrKxRkvW6N0/s800/chigo_girl.png',
            'http://4.bp.blogspot.com/-xdAPDPF4fRs/VnE388aR7aI/AAAAAAAA17o/wua-kte1ahI/s800/pose_genki02_girl.png',
            'http://3.bp.blogspot.com/-I-gIHWW_8Gk/VYJcYEt10zI/AAAAAAAAuXY/KCdEEGgFUAE/s800/kid_boyish_girl.png',
            'http://1.bp.blogspot.com/-d--Gz9YriqI/WGnPW5YIevI/AAAAAAABA40/UsETonRUT2Qg37f-fY1jotEW7KzDpsBJACLcB/s800/happy_schoolgirl.png',
            'http://2.bp.blogspot.com/-ewr_OVkqqbc/V6wGUBMD84I/AAAAAAAA9Dw/JaxdpzH2z0gwnQX5F5UjmbxmPd0y5DXqwCLcB/s800/stand_woman_summer.png',
            'http://2.bp.blogspot.com/-Gugq-Rl9Jzo/VnE3-WYEqAI/AAAAAAAA170/NuE7rrg9Kd4/s800/pose_genki04_woman.png',
            'http://1.bp.blogspot.com/-0KvCCNUU128/U9y_Uurc6tI/AAAAAAAAjas/jusvXbDfhTc/s800/pose_burikko.png'
        ];

        var rnd = function(n) {
            return Math.floor(Math.random() * n);
        }

        var Isay = function() {
            if (state !== STATE_WHAT) return;
            var isaid = $mySay.value;

            if (isaid === '') return;

            $mySay.value = '';
            state = STATE_SAY;

            sheSay(isaid);
        };

        var sheSay = function(sayText) {
            sheSaying(sayText + 'なんてすっごーい！');
            shareMsg(sayText);

            if (state === STATE_SAY) {
                state = STATE_PRAISE;
                setTimeout(whatDo, 3000);
            }
        };

        var whatDo = function() {
            if (state !== STATE_PRAISE) return;

            var sayText = girlTempl[ rnd(girlTempl.length) ];

            sheSaying(sayText + '何してるの？');
            state = STATE_WHAT;
        }

        var sheSaying = function(string) {
            $girlSay.innerText = string;
        };

        var setGirlImg = function() {
            $girlImg.src = girlImgUrls[ rnd(girlImgUrls.length) ];
        };

        var shareMsg = function(string) {
            $twitterShare.dataset.text = "女の子に" + string + "褒めてもらっちゃった！";
        };

        window.addEventListener('load', function(e){
            $twitterShare = document.getElementById('twitterShare');
            $girlImg = document.getElementById('girlImg');
            $girlSay = document.getElementById('girlSay');
            $mySay = document.getElementById('mySay');
            $say = document.getElementById('say');

            $girlSay.innerText = '今何してるの？';
            state = STATE_WHAT;

            $say.addEventListener('click', Isay);
            $girlImg.addEventListener('click', setGirlImg);
        });
    </script>
</body>
</html>